---
import { PortableText } from "astro-portabletext";
import type { PortableTextProps } from "astro-portabletext/types";
import { mergeComponents } from "astro-portabletext/utils";

import BlockQuote from "./blocks/BlockQuote.astro";
import Code from "./blocks/Code.astro";
import Image from "./blocks/Image.astro";
import Link from "./blocks/Link.astro";
import Prototype from "./blocks/Prototype.astro";

export interface Props {
    value: PortableTextProps["value"];
    components?: PortableTextProps["components"];
}

const { value, components: overrideComponents = {} } = Astro.props;

const components = mergeComponents(
    {
        type: {
            image: Image,
            code: Code,
            prototype: Prototype,
        },
        block: {
            blockquote: BlockQuote,
        },
        list: {},
        mark: {
            link: Link,
        },
    },
    overrideComponents
);
---

<PortableText value={value} components={components} />
