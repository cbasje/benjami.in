---
interface Props {
    slugs: (string | undefined)[];
}
const { slugs } = Astro.props;
---

<rotary-dial data-slugs={JSON.stringify(slugs)}>
    <ul class="destination-list">
        <slot />
    </ul>
    <svg
        width="400"
        height="400"
        viewBox="0 0 400 400"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden
    >
        <g class="numbers" clip-path="url(#clipNumbers)">
            <path
                d="M269.522 70V50.608H268.946L265.938 57.712H261.65L266.226 47.6H273.618V70H269.522Z"
                fill="black"></path>
            <path
                d="M129.994 70.448C128.308 70.448 126.815 70.1493 125.514 69.552C124.212 68.9547 123.188 68.1013 122.442 66.992C121.716 65.8613 121.354 64.528 121.354 62.992V62.416H125.45V62.864C125.45 64.0587 125.866 65.0187 126.698 65.744C127.53 66.448 128.628 66.8 129.994 66.8C131.38 66.8 132.447 66.4693 133.194 65.808C133.962 65.1467 134.346 64.3147 134.346 63.312V62.992C134.346 62.3093 134.175 61.7547 133.834 61.328C133.492 60.9013 133.034 60.592 132.458 60.4C131.882 60.1867 131.231 60.08 130.506 60.08H126.026V55.6L133.258 51.76V51.248H121.93V47.6H137.802V53.04L131.05 56.624V57.136H132.234C133.236 57.136 134.207 57.3387 135.146 57.744C136.106 58.1493 136.895 58.7787 137.514 59.632C138.132 60.464 138.442 61.552 138.442 62.896V63.28C138.442 64.7307 138.09 66 137.386 67.088C136.682 68.1547 135.69 68.9867 134.41 69.584C133.151 70.16 131.679 70.448 129.994 70.448Z"
                fill="black"></path>
            <path
                d="M77.1681 113V108.456H66.1601V103.72L73.9041 90.6H81.2641V104.808H84.9761V108.456H81.2641V113H77.1681ZM70.0641 104.808H77.1681V93.224H76.5921L70.0641 104.296V104.808Z"
                fill="black"></path>
            <path
                d="M45.1023 177.448C43.3529 177.448 41.8383 177.139 40.5583 176.52C39.2996 175.901 38.3289 175.027 37.6463 173.896C36.9636 172.765 36.6223 171.453 36.6223 169.96V169.64H40.7823V169.928C40.7823 170.995 41.1343 171.912 41.8383 172.68C42.5636 173.427 43.6303 173.8 45.0383 173.8C46.4463 173.8 47.5236 173.427 48.2703 172.68C49.0383 171.912 49.4223 170.92 49.4223 169.704V169.384C49.4223 168.189 49.0383 167.24 48.2703 166.536C47.5236 165.832 46.5849 165.48 45.4543 165.48C44.8356 165.48 44.3236 165.565 43.9183 165.736C43.5129 165.907 43.1823 166.12 42.9263 166.376C42.6703 166.632 42.4569 166.888 42.2863 167.144H37.3263V154.6H52.6223V158.312H41.4223V163.784H41.9983C42.2116 163.507 42.4996 163.24 42.8623 162.984C43.2249 162.728 43.6943 162.515 44.2703 162.344C44.8463 162.173 45.5289 162.088 46.3183 162.088C47.6409 162.088 48.8463 162.365 49.9343 162.92C51.0223 163.475 51.8863 164.296 52.5263 165.384C53.1876 166.451 53.5183 167.773 53.5183 169.352V169.736C53.5183 171.315 53.1769 172.68 52.4943 173.832C51.8329 174.984 50.8729 175.88 49.6143 176.52C48.3556 177.139 46.8516 177.448 45.1023 177.448Z"
                fill="black"></path>
            <path
                d="M45.0934 247.448C43.3867 247.448 41.904 247.128 40.6454 246.488C39.3867 245.848 38.416 244.963 37.7334 243.832C37.0507 242.701 36.7094 241.4 36.7094 239.928V232.28C36.7094 230.467 37.072 228.963 37.7974 227.768C38.544 226.552 39.5574 225.645 40.8374 225.048C42.1387 224.451 43.6214 224.152 45.2854 224.152C46.9494 224.152 48.3894 224.429 49.6054 224.984C50.8427 225.539 51.792 226.339 52.4534 227.384C53.136 228.429 53.4774 229.677 53.4774 231.128H49.3174C49.3174 230.232 49.008 229.453 48.3894 228.792C47.7707 228.131 46.736 227.8 45.2854 227.8C43.856 227.8 42.7467 228.173 41.9574 228.92C41.1894 229.667 40.8054 230.701 40.8054 232.024V234.328H41.3814C41.744 233.901 42.2987 233.496 43.0454 233.112C43.792 232.728 44.88 232.536 46.3094 232.536C47.6107 232.536 48.8054 232.813 49.8934 233.368C51.0027 233.923 51.8987 234.733 52.5814 235.8C53.264 236.845 53.6054 238.115 53.6054 239.608V239.992C53.6054 241.464 53.2534 242.765 52.5494 243.896C51.8454 245.005 50.8534 245.88 49.5734 246.52C48.2934 247.139 46.8 247.448 45.0934 247.448ZM45.1574 243.8C46.5014 243.8 47.5574 243.448 48.3254 242.744C49.1147 242.04 49.5094 241.101 49.5094 239.928V239.672C49.5094 238.883 49.328 238.2 48.9654 237.624C48.624 237.048 48.1227 236.6 47.4614 236.28C46.8214 235.96 46.0534 235.8 45.1574 235.8C44.2827 235.8 43.5147 235.96 42.8534 236.28C42.192 236.6 41.68 237.048 41.3174 237.624C40.976 238.2 40.8054 238.883 40.8054 239.672V239.928C40.8054 241.101 41.1894 242.04 41.9574 242.744C42.7467 243.448 43.8134 243.8 45.1574 243.8Z"
                fill="black"></path>
            <path
                d="M70.3326 311V310.168C70.3326 309.336 70.3966 308.632 70.5246 308.056C70.6526 307.459 70.93 306.787 71.3566 306.04L78.8766 292.76V292.248H66.9726V288.6H83.1006V293.464L75.1646 307.64C74.8873 308.131 74.6953 308.568 74.5886 308.952C74.482 309.336 74.4286 309.805 74.4286 310.36V311H70.3326Z"
                fill="black"></path>
            <path
                d="M130.006 354.448C128.3 354.448 126.785 354.192 125.462 353.68C124.161 353.168 123.137 352.432 122.39 351.472C121.665 350.491 121.302 349.339 121.302 348.016V347.632C121.302 346.608 121.484 345.765 121.846 345.104C122.209 344.421 122.657 343.888 123.19 343.504C123.745 343.12 124.268 342.853 124.758 342.704V342.128C124.268 341.957 123.777 341.68 123.286 341.296C122.796 340.912 122.39 340.4 122.07 339.76C121.772 339.12 121.622 338.352 121.622 337.456V337.072C121.622 335.899 121.964 334.875 122.646 334C123.35 333.104 124.332 332.411 125.59 331.92C126.849 331.408 128.321 331.152 130.006 331.152C131.692 331.152 133.164 331.408 134.422 331.92C135.681 332.411 136.652 333.104 137.334 334C138.038 334.875 138.39 335.899 138.39 337.072V337.456C138.39 338.352 138.23 339.12 137.91 339.76C137.612 340.4 137.217 340.912 136.726 341.296C136.257 341.68 135.766 341.957 135.254 342.128V342.704C135.766 342.853 136.289 343.12 136.822 343.504C137.356 343.888 137.804 344.421 138.166 345.104C138.529 345.765 138.71 346.608 138.71 347.632V348.016C138.71 349.339 138.337 350.491 137.59 351.472C136.865 352.432 135.841 353.168 134.518 353.68C133.217 354.192 131.713 354.448 130.006 354.448ZM130.006 350.8C131.478 350.8 132.609 350.523 133.398 349.968C134.209 349.392 134.614 348.635 134.614 347.696V347.44C134.614 346.501 134.22 345.755 133.43 345.2C132.662 344.624 131.521 344.336 130.006 344.336C128.513 344.336 127.372 344.624 126.582 345.2C125.793 345.755 125.398 346.501 125.398 347.44V347.696C125.398 348.635 125.793 349.392 126.582 349.968C127.393 350.523 128.534 350.8 130.006 350.8ZM130.006 340.688C131.372 340.688 132.428 340.443 133.174 339.952C133.921 339.461 134.294 338.768 134.294 337.872V337.616C134.294 336.72 133.91 336.027 133.142 335.536C132.374 335.045 131.329 334.8 130.006 334.8C128.684 334.8 127.638 335.045 126.87 335.536C126.102 336.027 125.718 336.72 125.718 337.616V337.872C125.718 338.768 126.092 339.461 126.838 339.952C127.585 340.443 128.641 340.688 130.006 340.688Z"
                fill="black"></path>
            <path
                d="M268.493 354.448C265.848 354.448 263.725 353.723 262.125 352.272C260.525 350.8 259.725 348.581 259.725 345.616V339.984C259.725 337.104 260.525 334.917 262.125 333.424C263.725 331.909 265.848 331.152 268.493 331.152C271.16 331.152 273.282 331.909 274.861 333.424C276.461 334.917 277.261 337.104 277.261 339.984V345.616C277.261 348.581 276.461 350.8 274.861 352.272C273.282 353.723 271.16 354.448 268.493 354.448ZM268.493 350.8C270.093 350.8 271.266 350.363 272.013 349.488C272.781 348.613 273.165 347.365 273.165 345.744V339.792C273.165 338.149 272.738 336.912 271.885 336.08C271.053 335.227 269.922 334.8 268.493 334.8C267.021 334.8 265.869 335.237 265.037 336.112C264.226 336.987 263.821 338.213 263.821 339.792V345.744C263.821 347.429 264.205 348.699 264.973 349.552C265.762 350.384 266.936 350.8 268.493 350.8Z"
                fill="black"></path>
            <path
                d="M198.709 370.448C197.045 370.448 195.595 370.171 194.357 369.616C193.141 369.061 192.192 368.261 191.509 367.216C190.848 366.171 190.517 364.923 190.517 363.472H194.677C194.677 364.368 194.987 365.147 195.605 365.808C196.245 366.469 197.28 366.8 198.709 366.8C200.16 366.8 201.269 366.427 202.037 365.68C202.805 364.912 203.189 363.877 203.189 362.576V360.272H202.613C202.251 360.699 201.696 361.104 200.949 361.488C200.224 361.872 199.136 362.064 197.685 362.064C196.405 362.064 195.211 361.787 194.101 361.232C192.992 360.677 192.096 359.877 191.413 358.832C190.731 357.765 190.389 356.485 190.389 354.992V354.608C190.389 353.115 190.741 351.813 191.445 350.704C192.149 349.595 193.141 348.731 194.421 348.112C195.701 347.472 197.195 347.152 198.901 347.152C200.608 347.152 202.091 347.472 203.349 348.112C204.608 348.752 205.579 349.637 206.261 350.768C206.944 351.899 207.285 353.2 207.285 354.672V362.32C207.285 364.133 206.912 365.648 206.165 366.864C205.44 368.059 204.427 368.955 203.125 369.552C201.845 370.149 200.373 370.448 198.709 370.448ZM198.837 358.8C199.733 358.8 200.501 358.64 201.141 358.32C201.803 358 202.304 357.552 202.645 356.976C203.008 356.4 203.189 355.717 203.189 354.928V354.672C203.189 353.477 202.795 352.539 202.005 351.856C201.237 351.152 200.181 350.8 198.837 350.8C197.493 350.8 196.427 351.152 195.637 351.856C194.869 352.539 194.485 353.477 194.485 354.672V354.928C194.485 355.717 194.656 356.4 194.997 356.976C195.36 357.552 195.872 358 196.533 358.32C197.195 358.64 197.963 358.8 198.837 358.8Z"
                fill="black"></path>
            <path
                d="M191.344 54V51.312C191.344 49.7547 191.6 48.464 192.112 47.44C192.624 46.3947 193.36 45.5413 194.32 44.88C195.301 44.1973 196.496 43.6427 197.904 43.216L200.048 42.544C200.837 42.288 201.499 41.9787 202.032 41.616C202.565 41.232 202.971 40.7733 203.248 40.24C203.547 39.7067 203.696 39.0987 203.696 38.416V38.288C203.696 37.2213 203.333 36.3787 202.608 35.76C201.883 35.12 200.891 34.8 199.632 34.8C198.395 34.8 197.392 35.1413 196.624 35.824C195.877 36.4853 195.504 37.4453 195.504 38.704V39.28H191.408V38.768C191.408 37.1467 191.771 35.7707 192.496 34.64C193.221 33.5093 194.203 32.6453 195.44 32.048C196.699 31.4507 198.096 31.152 199.632 31.152C201.168 31.152 202.555 31.4507 203.792 32.048C205.029 32.624 206 33.4453 206.704 34.512C207.429 35.5573 207.792 36.7947 207.792 38.224V38.544C207.792 39.9733 207.493 41.1893 206.896 42.192C206.32 43.1733 205.531 43.984 204.528 44.624C203.525 45.2427 202.384 45.7547 201.104 46.16L199.056 46.8C198.139 47.0773 197.424 47.3867 196.912 47.728C196.4 48.048 196.037 48.4107 195.824 48.816C195.632 49.2 195.536 49.6693 195.536 50.224V50.352H207.6V54H191.344Z"
                fill="black"></path>
        </g>
        <g class="circles">
            <circle cx="269" cy="342" r="32"></circle>
            <circle cx="200" cy="358" r="32"></circle>
            <circle cx="131" cy="342" r="32"></circle>
            <circle cx="76" cy="299" r="32"></circle>
            <circle cx="46" cy="235" r="32"></circle>
            <circle cx="46" cy="165" r="32"></circle>
            <circle cx="76" cy="101" r="32"></circle>
            <circle cx="131" cy="58" r="32"></circle>
            <circle cx="200" cy="42" r="32"></circle>
            <circle cx="269" cy="58" r="32"></circle>
        </g>
        <path
            class="triangle"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M372.18 324.848L366.572 332.856C363.696 336.964 357.794 337.443 354.292 333.854L317.568 296.205C311.397 289.878 318.53 279.691 326.585 283.327L374.524 304.959C379.095 307.022 380.663 312.732 377.787 316.84L372.18 324.848Z"
            fill="black"></path>
        <defs>
            <clipPath id="clipNumbers">
                <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M232 42C232 59.6731 217.673 74 200 74C182.327 74 168 59.6731 168 42C168 24.3269 182.327 10 200 10C217.673 10 232 24.3269 232 42ZM131 90C148.673 90 163 75.6731 163 58C163 40.3269 148.673 26 131 26C113.327 26 99 40.3269 99 58C99 75.6731 113.327 90 131 90ZM108 101C108 118.673 93.6731 133 76 133C58.3269 133 44 118.673 44 101C44 83.3269 58.3269 69 76 69C93.6731 69 108 83.3269 108 101ZM46 197C63.6731 197 78 182.673 78 165C78 147.327 63.6731 133 46 133C28.3269 133 14 147.327 14 165C14 182.673 28.3269 197 46 197ZM78 235C78 252.673 63.6731 267 46 267C28.3269 267 14 252.673 14 235C14 217.327 28.3269 203 46 203C63.6731 203 78 217.327 78 235ZM76 331C93.6731 331 108 316.673 108 299C108 281.327 93.6731 267 76 267C58.3269 267 44 281.327 44 299C44 316.673 58.3269 331 76 331ZM163 342C163 359.673 148.673 374 131 374C113.327 374 99 359.673 99 342C99 324.327 113.327 310 131 310C148.673 310 163 324.327 163 342ZM269 374C286.673 374 301 359.673 301 342C301 324.327 286.673 310 269 310C251.327 310 237 324.327 237 342C237 359.673 251.327 374 269 374ZM200 390C217.673 390 232 375.673 232 358C232 340.327 217.673 326 200 326C182.327 326 168 340.327 168 358C168 375.673 182.327 390 200 390ZM269 90C286.673 90 301 75.6731 301 58C301 40.3269 286.673 26 269 26C251.327 26 237 40.3269 237 58C237 75.6731 251.327 90 269 90Z"
                    fill="black"></path>
            </clipPath>
        </defs>
    </svg>
</rotary-dial>

<script src="../../lib/dial-component.ts"></script>

<style lang="postcss">
    rotary-dial {
        flex: 1;
        display: grid;
        place-content: stretch;

        cursor: grab;

        &.grabbing {
            cursor: grabbing;
        }

        > * {
            grid-area: 1/1;
        }

        ul.destination-list {
            margin: 0;
            padding: 0;
            position: relative;

            :global(li) {
                width: 50%;
                height: 50%;
                max-inline-size: unset;
                max-block-size: unset;

                position: absolute;
                top: 25%;
                left: 25%;

                padding: 0;

                list-style: none;
                border-radius: 50%;
                background: var(--color-1);

                transition: opacity 140ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

                pointer-events: none;
                user-select: text;
            }

            :global(li a) {
                width: 100%;
                height: 100%;
                display: block;
                position: relative;

                margin: 0;
                padding: 0;

                border-radius: var(--radius-6) var(--radius-6) 50% 50%;
            }

            :global(li img) {
                width: 100%;
                height: auto;
                position: absolute;
                bottom: 0;
            }

            :global(li.active) {
                opacity: 1;
            }
            :global(li:not(.active)) {
                opacity: 0;
            }
            :global(li:has(:focus-visible)) {
                opacity: 1;
            }
        }

        > svg {
            width: 100%;
            height: auto;
            aspect-ratio: 1;
            pointer-events: none;

            .circles {
                rotate: calc(var(--rotation) * 1deg);
                transform-origin: center;

                > circle {
                    stroke: var(--text-1);
                    stroke-width: 0.5;
                }
            }
            .numbers > path {
                fill: var(--text-1);
            }
            .triangle {
                fill: var(--text-1);
            }
            #clipNumbers > path {
                rotate: calc(var(--rotation) * 1deg);
                transform-origin: center;
            }
        }
    }

    @media (--md-n-above) {
        rotary-dial {
            max-width: 80vmin;

            &:not(.grabbing, .resetting):hover {
                > svg .circles {
                    --rotation: 3 !important;
                    transition: rotate 200ms var(--ease-elastic-4);
                }
            }
        }
    }
</style>
