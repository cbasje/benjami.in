---
import { useSanityClient } from "astro-sanity";
import i18next, { changeLanguage } from "i18next";
import { projectsQuery } from "../../../../lib/queries";
import type { Project } from "../../../../lib/types";
import BlockManager from "../../../components/BlockManager.astro";
import ProjectLayout from "../../../layouts/project.astro";

changeLanguage("nl");

export async function getStaticPaths() {
    const projects: Project[] = await useSanityClient().fetch(projectsQuery, {
        locale: i18next.language,
    });
    return projects.map((p) => ({
        params: { slug: p.slug },
        props: { project: p },
    }));
}
const project: Project = Astro.props.project;
---

<ProjectLayout project={project}>
    <BlockManager value={project.content} />
</ProjectLayout>
