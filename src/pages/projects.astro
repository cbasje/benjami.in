---
import { useSanityClient } from "astro-sanity";
import i18next, { changeLanguage } from "i18next";
import { projectListQuery } from "../../lib/queries";
import type { Project } from "../../lib/types";
import Footer from "../components/Footer.astro";
import MainHead from "../components/MainHead.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";

changeLanguage("en");

const projects = await useSanityClient().fetch(projectListQuery, {
    locale: i18next.language,
});
---

<html lang="en">
    <head>
        <MainHead
            title="All Projects | Jeanine White"
            description="Learn about Jeanine White's most recent projects"
        />
        <style>
            .grid {
                display: grid;
                grid-gap: 3rem;
            }
            .title {
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
        </style>
    </head>
    <body>
        <div class="wrapper">
            <h1 class="title">All Projects</h1>
            <div class="grid">
                {
                    projects &&
                        projects.map((project: Project) => (
                            <PortfolioPreview project={project} />
                        ))
                }
            </div>
        </div>
        <Footer />
    </body>
</html>
