---
import { useSanityClient } from "astro-sanity";
import {
    projectListQuery,
    projectPathsQuery,
    projectQuery,
} from "../../../lib/queries";
import type { Project } from "../../../lib/types";
import ProjectLayout from "../../layouts/project.astro";

export async function getStaticPaths() {
    const projects: Project[] = await useSanityClient().fetch(
        projectListQuery,
        {
            locale: "en",
        }
    );

    return projects.map((p) => ({
        params: { slug: p.slug },
        props: { project: p },
    }));
}

const project: Project = Astro.props.project;
---

<ProjectLayout project={project}>
    Project: {project.slug}
</ProjectLayout>
