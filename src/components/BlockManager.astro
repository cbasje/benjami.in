---
import type { PortableTextProps } from "astro-portabletext/types";
import { PortableText } from "astro-portabletext";
// Custom components
import MyBlock from "./blocks/MyBlock.astro";
import MyList from "./blocks/MyList.astro";
import MyMark from "./blocks/MyMark.astro";
import ImageBlock from "./blocks/Image.astro";
import CodeBlock from "./blocks/Code.astro";
import PrototypeBlock from "./blocks/Prototype.astro";
// Lib
import { mergeComponents } from "astro-portabletext/utils";

export interface Props {
    value: PortableTextProps["value"];
    components?: PortableTextProps["components"];
}

const { value, components: overrideComponents = {} } = Astro.props;

const components = mergeComponents(
    {
        type: {
            image: ImageBlock,
            code: CodeBlock,
            prototype: PrototypeBlock,
        },
        block: MyBlock,
        list: MyList,
        mark: MyMark,
    },
    overrideComponents
);
---

<PortableText value={value} components={components} />
