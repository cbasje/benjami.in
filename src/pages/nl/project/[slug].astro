---
import { useSanityClient } from "astro-sanity";
import i18next, { changeLanguage } from "i18next";
import { projectListQuery } from "../../../../lib/queries";
import type { Project } from "../../../../lib/types";
import ProjectLayout from "../../../layouts/project.astro";

changeLanguage("nl");

export async function getStaticPaths() {
    const projects: Project[] = await useSanityClient().fetch(projectListQuery, {
        locale: i18next.language,
    });
    return projects.map((p) => ({
        params: { slug: p.slug },
        props: { project: p },
    }));
}
const project: Project = Astro.props.project;
---

<ProjectLayout project={project}>
    Project: {project.slug}
</ProjectLayout>
